import{j as e,r as v,m as G,L as H,S as V}from"./app-PAcH8mEI.js";import{A as R,H as U}from"./app-layout-CYRkYMMk.js";import{D as Y,f as J}from"./format-BMAe8L_G.js";import{I as n}from"./input-error-DhixQXJ9.js";import{S as K,c as Q,a as W,B as y,L as X}from"./app-logo-icon-C1GCiWs0.js";import{D as C,a as Z,b as w,c as D,d as k,e as I,f as _}from"./dialog-Be9wMSGQ.js";import{I as d}from"./input-DocUmPqS.js";import{L as c}from"./label-CY5Yq7-4.js";import{m as $,v as ee,w as se,T as ae,n as re,x as te,y as le,z as oe,B as ie,t as T}from"./app-header-layout-0fU0bezq.js";import{f as ne}from"./dateHelper-DeSP8uTY.js";/* empty css            */import"./checkbox-D2uzdcW9.js";import"./index-DQ1IlWpQ.js";import"./index-ClCDInp8.js";const de=W("inline-flex items-center justify-center rounded-sm border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-auto",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",blue:"bg-[#2a5298] text-white font-mono tracking-widest",success:"bg-[#1c7148] text-white"}},defaultVariants:{variant:"default"}});function S({className:u,variant:a,asChild:g=!1,...f}){const j=g?K:"span";return e.jsx(j,{"data-slot":"badge",className:Q(de({variant:a}),u),...f})}const ce=[{title:"Modules",href:"/modules"}];function we({modules:u,tableData:a,allModulesCount:g}){const{canCreate:f,canUpdate:j,canDelete:P}=$(),[F,N]=v.useState(!1),[M,b]=v.useState(null),[L,m]=v.useState(!1),{data:t,setData:l,post:A,delete:O,processing:r,errors:o,reset:q}=G({icon:"",order:0,name:"",description:"",path:null,group_title:""}),z=s=>{const i=new Promise((p,x)=>{O(route("modules.delete-module",s),{preserveScroll:!0,onSuccess:B=>{const h=B.props.flash;m(!1),b(null),h!=null&&h.error?x(h.error):p()},onError:()=>{m(!1),b(null),x("Failed to delete module.")}})});T.promise(i,{loading:"Deleting module...",success:"Module deleted!",error:p=>p,duration:5e3,description:ne(new Date),descriptionClassName:"!text-gray-500",classNames:{success:"!text-green-700",error:"!text-red-700",loading:"!text-blue-700"}})},E=s=>{s.preventDefault();const i=new Promise((p,x)=>{A(route("modules.add-module"),{preserveScroll:!0,onSuccess:()=>{q(),p(),N(!1)},onError:()=>{x()}})});T.promise(i,{loading:"Creating module...",success:"Module created successfully!",error:"Failed to create module!",duration:5e3})};return e.jsxs(R,{breadcrumbs:ce,children:[e.jsx(H,{title:"Modules"}),e.jsxs("div",{className:"px-4 py-6",children:[e.jsx(U,{title:"Modules",description:"Manage the modules of the system."}),e.jsxs("div",{className:"flex flex-col gap-2",children:[f("Modules")&&e.jsxs(C,{open:F,onOpenChange:N,children:[e.jsx(Z,{asChild:!0,children:e.jsxs(y,{className:"w-max",children:[e.jsx(ee,{}),"Add Module"]})}),e.jsxs(w,{children:[e.jsxs(D,{children:[e.jsx(k,{children:"Add Module"}),e.jsx(I,{children:"Fill out the form below to create a new module."})]}),e.jsxs("form",{className:"flex flex-col gap-6",onSubmit:E,children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(c,{htmlFor:"icon",className:"flex flex-col gap-0.5",children:["Module Icon",e.jsxs("span",{className:"text-xs text-gray-500",children:[e.jsx("span",{children:"Icon of the module in the sidebar. This is used to display the icon of the module in the sidebar."}),e.jsx("a",{href:"https://lucide.dev/icons/",className:"ml-1",target:"_blank",rel:"noopener noreferrer",children:e.jsx("span",{className:"text-blue-500 underline",children:"Click here"})}),e.jsx("span",{className:"ml-1",children:"to see the available icons."})]})]}),e.jsx(d,{id:"icon",type:"text",required:!0,tabIndex:0,autoComplete:"icon",value:t.icon,onChange:s=>l("icon",s.target.value),disabled:r,placeholder:"Module icon from Lucide (e.g., LayoutGrid)"})]}),e.jsx(n,{message:o.icon,className:"mt-2"})]}),e.jsxs("div",{className:"grid",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(c,{htmlFor:"order",children:"Module Order"}),e.jsx(d,{id:"order",type:"number",required:!0,tabIndex:1,autoComplete:"order",value:t.order,onChange:s=>l("order",parseInt(s.target.value)),disabled:r,placeholder:"Module order"})]}),e.jsx(n,{message:o.order,className:"mt-2"})]}),e.jsxs("div",{className:"grid",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(c,{htmlFor:"name",children:"Module Name"}),e.jsx(d,{id:"name",type:"text",required:!0,tabIndex:2,autoComplete:"name",value:t.name,onChange:s=>l("name",s.target.value),disabled:r,placeholder:"Module name"})]}),e.jsx(n,{message:o.name,className:"mt-2"})]}),e.jsxs("div",{className:"grid",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(c,{htmlFor:"description",children:"Module Description"}),e.jsx(d,{id:"description",type:"text",tabIndex:3,autoComplete:"description",value:t.description,onChange:s=>l("description",s.target.value),disabled:r,placeholder:"Module description"})]}),e.jsx(n,{message:o.description,className:"mt-2"})]}),e.jsxs("div",{className:"grid",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(c,{htmlFor:"path",children:"Module Path"}),e.jsx(d,{id:"path",type:"text",tabIndex:4,autoComplete:"path",value:t.path??"",onChange:s=>l("path",s.target.value),disabled:r,placeholder:"Module path (e.g., /admin/dashboard)"})]}),e.jsx(n,{message:o.path,className:"mt-2"})]}),e.jsxs("div",{className:"grid",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(c,{htmlFor:"group_title",children:"Module Group Title"}),e.jsx(d,{id:"group_title",type:"text",required:!0,tabIndex:5,autoComplete:"group_title",value:t.group_title??"",onChange:s=>l("group_title",s.target.value),disabled:r,placeholder:"Module group title (e.g., User Management)"})]}),e.jsx(n,{message:o.group_title,className:"mt-2"})]})]}),e.jsx(_,{children:e.jsxs(y,{type:"submit",className:"mt-2 w-full",tabIndex:5,disabled:r,children:[r&&e.jsx(X,{className:"h-4 w-4 animate-spin"}),"Create Module"]})})]})]})]}),e.jsx(Y,{enableSearch:!0,searchDefaultValue:a.search,indexFrom:u.from,enableIndex:!1,headers:[{key:"order",label:"Order"},{key:"icon",label:"Icon"},{key:"name",label:"Name"},{key:"description",label:"Description"},{key:"parent_name",label:"Parent",sortable:!1},{key:"is_client",label:"Path Type"},{key:"group_title",label:"Group Title"}],data:u.data,customData:[{key:"order",render:s=>e.jsx("span",{className:"text-center",children:s.order})},{key:"icon",render:s=>{const i=re(s.icon);return i?e.jsx(te,{children:e.jsxs(le,{children:[e.jsx(oe,{asChild:!0,children:e.jsx(i,{size:16})}),e.jsx(ie,{children:s.icon})]})}):e.jsx("span",{className:"text-gray-500",children:s.icon})}},{key:"description",render:s=>s.description?e.jsx("span",{children:s.description}):e.jsx("span",{className:"text-gray-500",children:"No description"})},{key:"path",render:s=>s.path?e.jsx(S,{variant:"outline",children:s.path}):e.jsx("span",{className:"text-gray-500",children:"No path"})},{key:"is_client",render:s=>s.is_client?e.jsx("span",{children:"Client"}):e.jsx("span",{children:"Admin"})},{key:"parent_name",render:s=>s.parent_name?e.jsx(S,{variant:"outline",children:s.parent_name}):e.jsx("span",{className:"text-gray-500",children:"No parent"})},{key:"created_at",render:s=>s.created_at?e.jsx("span",{children:J(new Date(s.created_at),"MMMM d, yyyy h:mm a")}):e.jsx("span",{className:"text-gray-500",children:"Not activated"})}],actions:[{label:"Manage Module",className:"bg-[#6366f1] hover:bg-[#6366f1]/90",icon:e.jsx(se,{size:14}),showIf:s=>j("Modules"),onClick:s=>V.visit(route("modules.view",s.id),{preserveScroll:!0})},{label:"",className:"bg-[#983b3b] hover:bg-[#983b3b]/90",icon:e.jsx(ae,{size:14}),showIf:s=>P("Modules"),onClick:s=>{b(s.id),m(!0)}}],dataCount:g,defaultFilters:a.filters,paginationCurrentPage:a.page,paginationLastPage:u.last_page,baseRoute:"modules",defaultSort:a.sort,defaultSortDirection:a.direction,defaultPerPage:a.perPage,perPagesDropdown:a.perPagesDropdown})]}),M&&e.jsx(C,{open:L,onOpenChange:m,children:e.jsx(w,{children:e.jsxs(D,{children:[e.jsx(k,{children:"Are you absolutely sure?"}),e.jsx(I,{children:"This action cannot be undone. This will permanently delete the module and all of its data."}),e.jsx(_,{children:e.jsx(y,{type:"submit",variant:"danger",onClick:()=>z(M),children:"Yes"})})]})})})]})]})}export{we as default};
