import{K as I,m as L,r as c,j as e,L as E,$ as R}from"./app-PAcH8mEI.js";import{D as P}from"./delete-user-5xA5vG66.js";import{H as U}from"./heading-small-B48OAevr.js";import{C as z}from"./CropDialog-BC0JjRhn.js";import{I as u}from"./input-error-DhixQXJ9.js";import{u as $,A as v,a as j,b as g,t as H}from"./app-header-layout-0fU0bezq.js";import{B as T}from"./app-logo-icon-C1GCiWs0.js";import{C as q}from"./checkbox-D2uzdcW9.js";import{D as B,a as M,b as Y,c as K,d as G,e as J}from"./dialog-Be9wMSGQ.js";import{I as p}from"./input-DocUmPqS.js";import{L as l}from"./label-CY5Yq7-4.js";import{A as O}from"./app-layout-CYRkYMMk.js";import{S as Q}from"./layout-CVUdlO_D.js";import{z as V}from"./transition-DL3S_QgM.js";/* empty css            */import"./index-DQ1IlWpQ.js";import"./index-ClCDInp8.js";import"./separator-CvoDClFk.js";const W=[{title:"Profile settings",href:"/settings/profile"}];function fe({mustVerifyEmail:N,status:C}){const{auth:a}=I().props,x=$(),{data:n,setData:r,post:b,errors:m,processing:w,recentlySuccessful:D,reset:S}=L({name:a.user.name,new_avatar:null,remove_avatar:!1,email:a.user.email}),y=s=>{s.preventDefault();const i=new Promise((t,o)=>{b(route("profile.update",a.user.id),{preserveScroll:!0,onSuccess:()=>{S("new_avatar"),t(),d.current.value=""},onError:()=>{o()}})});H.promise(i,{loading:"Updating user...",success:"User updated!",error:"Failed to update user.",duration:5e3})},[h,F]=c.useState(null),d=c.useRef(null),[A,f]=c.useState(!1),k=s=>{var o;const i=(o=s.target.files)==null?void 0:o[0];if(!i)return;const t=new FileReader;t.onload=()=>{F(t.result),f(!0)},t.readAsDataURL(i)},_=s=>{r("new_avatar",s)};return e.jsxs(O,{breadcrumbs:W,children:[e.jsx(E,{title:"Profile settings"}),e.jsxs(Q,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(U,{title:"Profile information",description:"Update your name and email address"}),e.jsx(l,{htmlFor:"avatar",children:"Current Avatar"}),e.jsxs(B,{children:[e.jsx(M,{asChild:!0,children:e.jsxs(v,{className:"mt-1 size-24 cursor-pointer rounded-md",children:[a.user.avatar&&e.jsx(j,{src:`/storage/${a.user.avatar}`,alt:a.user.name,className:"object-cover"}),e.jsx(g,{children:x(a.user.name)})]})}),e.jsxs(Y,{className:"sm:max-w-[425px]",children:[e.jsxs(K,{children:[e.jsx(G,{children:a.user.name}),e.jsx(J,{children:a.user.email})]}),e.jsxs(v,{className:"size-full rounded-md",children:[a.user.avatar&&e.jsx(j,{src:`/storage/${a.user.avatar}`,alt:a.user.name,className:"object-cover"}),e.jsx(g,{children:x(a.user.name)})]})]})]}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(q,{id:"verified",checked:n.remove_avatar,onCheckedChange:s=>{r("remove_avatar",s),r("new_avatar",null),d.current.value=""}}),e.jsx("label",{htmlFor:"verified",className:"text-sm leading-none font-medium peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Remove Avatar"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"avatar",children:"New Avatar"}),e.jsx(p,{type:"file",id:"avatar",name:"avatar",accept:"image/*",onChange:k,ref:d}),e.jsx(u,{message:m.new_avatar})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"name",children:"Name"}),e.jsx(p,{id:"name",className:"mt-1 block w-full",value:n.name,onChange:s=>r("name",s.target.value),required:!0,autoComplete:"name",placeholder:"Full name"}),e.jsx(u,{className:"mt-2",message:m.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"email",children:"Email address"}),e.jsx(p,{id:"email",type:"email",className:"mt-1 block w-full",value:n.email,onChange:s=>r("email",s.target.value),required:!0,autoComplete:"username",placeholder:"Email address"}),e.jsx(u,{className:"mt-2",message:m.email})]}),N&&a.user.email_verified_at===null?e.jsxs("div",{children:[e.jsxs("p",{className:"text-muted-foreground -mt-4 text-sm",children:["Your email address is unverified."," ",e.jsx(R,{href:route("verification.send"),method:"post",as:"button",className:"text-foreground underline decoration-neutral-300 underline-offset-4 transition-colors duration-300 ease-out hover:decoration-current! dark:decoration-neutral-500",children:"Click here to resend the verification email."})]}),C==="verification-link-sent"&&e.jsx("div",{className:"mt-2 text-sm font-medium text-green-600",children:"A new verification link has been sent to your email address."})]}):e.jsx("div",{children:e.jsx("p",{className:"text-muted-foreground -mt-4 text-sm",children:"Your email address is verified."})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(T,{disabled:w,children:"Save"}),e.jsx(V,{show:D,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-neutral-600",children:"Saved"})})]})]})]}),e.jsx(P,{})]}),h&&e.jsx(z,{imageSrc:h,open:A,onClose:()=>f(!1),onCropped:_})]})}export{fe as default};
